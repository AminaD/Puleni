{"changed":true,"filter":false,"title":"user.rb","tooltip":"/app/models/user.rb","value":"class User < ActiveRecord::Base\n  include DeviseTokenAuth::Concerns::User\n    has_and_belongs_to_many :roles\n    belongs_to :my_program, :class_name => \"Program\",\n    :foreign_key => \"program_id\"\n    has_and_belongs_to_many :written_programs, :class_name => \"Program\",\n    :join_table => \"programs_users\"\n    \n    \n    \n    \n# ############################################################ Bilo zakomentarisano\n  \n#   attr_accessor :password\n#   before_save :encrypt_password\n  \n#   validates_confirmation_of :password\n#   validates_presence_of :password, :on => :create\n#   validates_presence_of :email\n#   validates_uniqueness_of :email\n  \n#   def self.authenticate(email, password)\n#     user = find_by_email(email)\n#     if user && user.password_hash == BCrypt::Engine.hash_secret(password, user.password_salt)\n#       user\n#     else\n#       nil\n#     end\n#   end\n  \n#   def encrypt_password\n#     if password.present?\n#       self.password_salt = BCrypt::Engine.generate_salt\n#       self.password_hash = BCrypt::Engine.hash_secret(password, password_salt)\n#     end\n#   end\n  \n  ###########################################################################\nend\n\n\n\n\n\n","undoManager":{"mark":97,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":59,"column":44},"end":{"row":59,"column":45},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":45},"end":{"row":59,"column":46},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":46},"end":{"row":59,"column":47},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":47},"end":{"row":59,"column":48},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":48},"end":{"row":59,"column":49},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":49},"end":{"row":59,"column":50},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":50},"end":{"row":59,"column":51},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":51},"end":{"row":59,"column":52},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":52},"end":{"row":59,"column":53},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":53},"end":{"row":59,"column":54},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":54},"end":{"row":59,"column":55},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":55},"end":{"row":59,"column":56},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":56},"end":{"row":59,"column":57},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":57},"end":{"row":59,"column":58},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":58},"end":{"row":59,"column":59},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":59},"end":{"row":59,"column":60},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":60},"end":{"row":59,"column":61},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":61},"end":{"row":59,"column":62},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":62},"end":{"row":59,"column":63},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":63},"end":{"row":59,"column":64},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":64},"end":{"row":59,"column":65},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":65},"end":{"row":59,"column":66},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":66},"end":{"row":59,"column":67},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":67},"end":{"row":59,"column":68},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":68},"end":{"row":59,"column":69},"action":"insert","lines":["#"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":62},"end":{"row":78,"column":63},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":63},"end":{"row":78,"column":64},"action":"insert","lines":["B"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":64},"end":{"row":78,"column":65},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":65},"end":{"row":78,"column":66},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":66},"end":{"row":78,"column":67},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":67},"end":{"row":78,"column":68},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":68},"end":{"row":78,"column":69},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":68},"end":{"row":78,"column":69},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":68},"end":{"row":78,"column":69},"action":"insert","lines":["z"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":69},"end":{"row":78,"column":70},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":70},"end":{"row":78,"column":71},"action":"insert","lines":["k"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":71},"end":{"row":78,"column":72},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":72},"end":{"row":78,"column":73},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":73},"end":{"row":78,"column":74},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":74},"end":{"row":78,"column":75},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":75},"end":{"row":78,"column":76},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":76},"end":{"row":78,"column":77},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":77},"end":{"row":78,"column":78},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":78},"end":{"row":78,"column":79},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":79},"end":{"row":78,"column":80},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":80},"end":{"row":78,"column":81},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":81},"end":{"row":78,"column":82},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":82},"end":{"row":78,"column":83},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":5},"end":{"row":12,"column":68},"action":"remove","lines":["ttr_accessible :name, :email, :password, :password_confirmation"]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":4},"end":{"row":12,"column":5},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":2},"end":{"row":60,"column":4},"action":"remove","lines":["  ################################# Amina ubacila","    ","    attr_accessor :password","    ","    ","    email_regex = /\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}\\b/i","    ","    validates :name, :presence =>true,","              :length          =>{:maximum => 50}","              ","    validates :email, :presence =>true,","              :format           =>{:with => email_regex},","              :uniqueness       =>{:case_sensitive => false}","              ","    validates :password, :presence =>true,","              :confirmation     =>true,","              :length          =>{:within => 6..40}","              ","              ","    before_save :encrypt_password","    ","    def has_password?(submitted_password)","        encrypted_password=encrypt(submitted_password)","    end","    ","    ","    def self.authenticate(email, submitted_password)","      ","      user=find_by_email(email)","      return nil if user.nil?","      return user if user.has_password?(submitted_password)","      ","    end","    ","    ","    private","    ","    def encrypt_password","      ","      self.salt= Digest::SHA2.hexdigest{\"#{Time.now.utc}--#{password}\" }if self.new_record?","      self.encrypted_password = encrypt(password)","    end","    ","    def encrypt(pass)","      ","      Digest::SHA2.hexdigest{\"#{self.salt}--#{pass}\" }","      ","    end","    ","    ","    #################################################################","    "]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":0},"end":{"row":20,"column":43},"action":"remove","lines":["    #######################################"]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":4},"end":{"row":20,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":2},"end":{"row":19,"column":4},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":0},"end":{"row":19,"column":2},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":4},"end":{"row":19,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":2},"end":{"row":18,"column":4},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":0},"end":{"row":18,"column":2},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":4},"end":{"row":18,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":2},"end":{"row":17,"column":4},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":0},"end":{"row":17,"column":2},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":4},"end":{"row":17,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":2},"end":{"row":16,"column":4},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":0},"end":{"row":16,"column":2},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":4},"end":{"row":16,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":2},"end":{"row":15,"column":4},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":0},"end":{"row":15,"column":2},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":4},"end":{"row":15,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":2},"end":{"row":14,"column":4},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":0},"end":{"row":14,"column":2},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":4},"end":{"row":14,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":2},"end":{"row":13,"column":4},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":0},"end":{"row":13,"column":2},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":4},"end":{"row":13,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":2},"end":{"row":12,"column":4},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":12,"column":0},"end":{"row":12,"column":2},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":4},"end":{"row":12,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":2},"end":{"row":11,"column":4},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":0},"end":{"row":11,"column":2},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":4},"end":{"row":11,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":2},"end":{"row":10,"column":4},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":0},"end":{"row":10,"column":2},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":2},"end":{"row":10,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":0},"end":{"row":9,"column":2},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":4},"end":{"row":9,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":2},"end":{"row":8,"column":4},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":0},"end":{"row":8,"column":2},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":4},"end":{"row":12,"column":4},"action":"remove","lines":["","    "]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":2},"end":{"row":11,"column":4},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":0},"end":{"row":11,"column":2},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":4},"end":{"row":11,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":2},"end":{"row":10,"column":4},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":0},"end":{"row":10,"column":2},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":4},"end":{"row":10,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":2},"end":{"row":9,"column":4},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":0},"end":{"row":9,"column":2},"action":"remove","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":0},"end":{"row":9,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":4},"end":{"row":8,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":4},"end":{"row":7,"column":5},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":4},"end":{"row":7,"column":5},"action":"remove","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":4},"end":{"row":8,"column":0},"action":"insert","lines":["",""]},{"start":{"row":8,"column":0},"end":{"row":8,"column":4},"action":"insert","lines":["    "]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":8,"column":4},"end":{"row":8,"column":4},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1428616136000}